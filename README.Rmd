---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# blenders

The [`general-meta` branch of `tidymodels/stacks`](https://github.com/tidymodels/stacks/tree/general-meta) contains experimental source code for an interface to a generalized meta-learner in stacks. This repository contains source code for testing the possible benefits of this functionality.

The `R` folder contains a few helper functions that are utilized in `inst`. The script in that folder, `data-raw/blenders.Rmd`, contains source code for generating the dataset supplied with this package. The dataset, `stack_benchmarks`, contains coarse benchmarks on different modeling procedures.

```{r, message = FALSE}
library(tidyverse)
library(blenders)

data(stack_benchmarks)

glimpse(stack_benchmarks)
```

Notably, the `stack` column indicates whether model stacking was used, and the `model_type` column indicates the highest-level learner used. When `stack` is `TRUE`, this refers to the meta-learner. For several different datasets, we record the time to fit and RMSE value.

```{r basic-plot}
stack_benchmarks %>%
  mutate(
    glmnet_meta = if_else(isTRUE(stack) && model_type == "linear_reg", TRUE, FALSE)
  ) %>%
  ggplot() +
  aes(x = time_to_fit, y = metric_value, col = glmnet_meta) +
  geom_point() +
  facet_grid(dataset ~ stack, scales = "free") +
  labs(x = "Time to Fit", y = "RMSE", col = "glmnet\nMeta-learner")
```
